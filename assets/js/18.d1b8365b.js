(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{500:function(t,n,a){"use strict";a.r(n);var e=a(5),s=Object(e.a)({},(function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"docker-常用命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-常用命令"}},[t._v("#")]),t._v(" docker 常用命令")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("命令")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker pull { }")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("安装镜像 "),a("code",[t._v("镜像名")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker images")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("列出所有已安装的镜像列表")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker rmi { }")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("删除某个镜像 "),a("code",[t._v("镜像ID")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker ps")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("列出在运行的容器列表")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker ps -a")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("列出所有容器列表")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker start { }")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("运行容器 "),a("code",[t._v("容器ID/容器名")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker stop { }")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("停止容器 "),a("code",[t._v("容器ID/容器名")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker rm { }")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("删除容器 "),a("code",[t._v("容器ID/容器名")]),t._v(" , 前提是此容器已停止")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker restart { }")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("重启容器 "),a("code",[t._v("容器ID/容器名")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker exec -it { } bash")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("进入容器 "),a("code",[t._v("容器ID/容器名")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker cp { }:{path} {path}")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("复制容器内的文件到本机 ，"),a("code",[t._v("容器ID/容器名")])])])])]),t._v(" "),a("h2",{attrs:{id:"创建容器并运行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建容器并运行"}},[t._v("#")]),t._v(" 创建容器并运行")]),t._v(" "),a("h3",{attrs:{id:"第一步基于已安装的-nginx-镜像创建容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第一步基于已安装的-nginx-镜像创建容器"}},[t._v("#")]),t._v(" 第一步基于已安装的 Nginx 镜像创建容器")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("```bash\ndocker run --name nginx-web -p 3055:80  -d nginx\n# --name  给容器命名；\n# -p 宿主ip 映射 ：容器 ip ;\n# -d 启动哪一个镜像；\n```\n")])])]),a("p",[a("img",{attrs:{src:"/BC48FDA2-EEFD-4770-AF8B-F556BCAC08FA.png",alt:""}})]),t._v(" "),a("p",[t._v("创建好容器后，会返回一串容器 ID ，此时在浏览器 URL 栏输入服务器 IP 加端口就可以访问，不出意外的话是可以得到 Nginx 的欢迎页的。 也可以用 Linx 命令来访问 。\n*** 如果访问不到的话，有可能是你的 端口 "),a("code",[t._v("3055")]),t._v(" 没有开放，也就是 进站 与 出站 没有配置；**")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" localhost:3055\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"/94B9D932-362B-4c68-AB20-B26133220788.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"第二步在本地创建挂载目录-后续与容器的配置做映射"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第二步在本地创建挂载目录-后续与容器的配置做映射"}},[t._v("#")]),t._v(" 第二步在本地创建挂载目录( 后续与容器的配置做映射 )")]),t._v(" "),a("p",[t._v("批量创建目录 "),a("code",[t._v("mkdir -p /data/nginx/{conf,conf.d,html,logs}")]),t._v(" ，查看已创建好的目录。目录可随意放置，我个人比较喜欢放在 "),a("code",[t._v("data")]),t._v(" 目录下\n"),a("img",{attrs:{src:"/C2DCEC89-000C-4d38-905A-DB139E7365C7.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"第三步将部分容器里的配置文件复制到挂载目录下"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第三步将部分容器里的配置文件复制到挂载目录下"}},[t._v("#")]),t._v(" 第三步将部分容器里的配置文件复制到挂载目录下")]),t._v(" "),a("p",[t._v("我们只需要容器内的两个配置文件"),a("code",[t._v("nginx.conf")]),t._v(" , "),a("code",[t._v("conf.d/default.conf")]),t._v("。依次把文件复制到对应目录下。")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v(" docker "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" 容器ID:/etc/nginx/nginx.conf /data/nginx/conf/\n docker "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" 容器ID:/etc/nginx/conf.d/default.conf  /data/nginx/conf.d/\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[a("img",{attrs:{src:"/D3DA1570-F98E-4020-AE78-1AD331169003.png",alt:""}})]),t._v(" "),a("h3",{attrs:{id:"第四步-最为关键的步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第四步-最为关键的步骤"}},[t._v("#")]),t._v(" 第四步 最为关键的步骤")]),t._v(" "),a("p",[t._v("首先，我们需要把之前创建的容器停掉并删除掉。")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("docker stop 容器ID    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#停止容器")]),t._v("\ndocker "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" 容器ID "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#删除容器")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("创建这个容器，仅仅为了复制他的配置文件而已，也就是 "),a("code",[t._v("nginx.conf")]),t._v(" ,"),a("code",[t._v("default.conf")]),t._v("这两个文件 。不想手动去创建这俩文件，个人觉得比较麻烦。你不闲麻烦的话完全可手动去创建，并忽略 第一步 和 第三步。")]),t._v(" "),a("p",[t._v("重新创建容器，同时映射配置文件的路径。")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v(" docker run --name nginx-web -p "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3055")]),t._v(":80 -v /data/nginx/conf/nginx.conf:/etc/nginx/nginx.conf -v /data/nginx/conf.d:/etc/nginx/conf.d -v /data/nginx/html:/usr/share/nginx/html  -v/data/nginx/logs:/var/log/nginx -d nginx\n\n docker run  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#运行容器")]),t._v("\n --name nginx-web  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#给创建的容器命名")]),t._v("\n -p "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3055")]),t._v(":80  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#映射容器端口号，左边的服务器的端口，右边的是容器的端口")]),t._v("\n -v /data/nginx/conf/nginx.conf:/etc/nginx/nginx.conf    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#映射 nginx 配置文件")]),t._v("\n -v /data/nginx/conf.d:/etc/nginx/conf.d  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 映射配置文件的包含目录")]),t._v("\n -v /data/nginx/html:/usr/share/nginx/html   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#映射静态资源 存的目录")]),t._v("\n -v/data/nginx/logs:/var/log/nginx  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 映射日志记录文件")]),t._v("\n -d nginx  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启动 nginx 镜像")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("p",[t._v("运行成功后会返回一串容器 ID 此时，重新去浏览器访问试试看，如果页面正常能访问 或 显示 403 的话，表明目录和文件已经映射成功了，显示 403 的原因是因为 "),a("code",[t._v("/data/nginx/html")]),t._v(" 下面没有放置 "),a("code",[t._v("index.html")]),t._v(" 文件。放入一个文件就可以了。")])])}),[],!1,null,null,null);n.default=s.exports}}]);